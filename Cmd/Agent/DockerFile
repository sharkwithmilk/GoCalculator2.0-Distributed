# Используем официальный образ Go
FROM golang:1.23

# Устанавливаем рабочую директорию
WORKDIR /app

# Копируем go.mod для установки зависимостей
COPY go.mod ./

# Копируем исходный код
COPY . .

# Собираем приложение
RUN go build -o agent ./cmd/agent

# Устанавливаем переменную окружения по умолчанию
ENV COMPUTING_POWER=4

# Запускаем агент
CMD ["./agent"]